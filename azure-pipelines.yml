# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  name: Default
  demands: 
    - MSBuild
    - Nuget

# resources:
#   repositories:
#     - repository: local repo
#       type: git
#       ref: refs/heads/master
#       endpoint: C:\Users\abhishek.chaudhary\Documents\All Repos\salescloser360


variables:
  ExeNamePrefix: Bamboo_
  MajorVersion: 1
  MinorVersion: 1
  NAS: \\10.91.1.12
  NAS_Path: 'N:'
  TargetPath: $(NAS)\Data\Builds\Sales Closer\

stages:
  # - stage: SC_Checkout
  #   jobs:
  #     - job: Clone_form_Local
  #       steps:
  #         - task: Bash@3
  #           inputs:
  #             filePath: $(Build.SourcesDirectory)\scripts\clone_repo.sh #cloned dir = ./sc
        
  - stage: Pre_Build
    jobs:
      - job: set_vars
        steps:
          # - checkout: none
          # - script: echo $(Build.BinariesDirectory) 
          # - script: echo $(Agent.Name)
          - task: BatchScript@1
            inputs:
              filename: $(Build.SourcesDirectory)\scripts\setVariables.bat

  # - stage: Build
  #   jobs:
  #     - job: Restore_NUG_PCKS
  #       steps:
  #         - checkout: none
  #         - task: NuGetCommand@2
  #           inputs:
  #             command: 'restore'
  #             feedsToUse: 'config'
  #             nugetConfigPath: 'nuget.config'   


